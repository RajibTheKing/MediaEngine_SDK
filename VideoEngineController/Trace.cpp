#include "Trace.h"
#include <string.h>
#include "LogPrinter.h"

namespace MediaSDK
{
	short sTraceArray[] =
	{
		19, -32768, -22942, -32768, 17, 32767, 22977, 32767, 15, -32768, -22945, -32768, 16, 32767, 22977,
		32767, 16, -32768, -22944, -32768, 16, 32767, 22977, 32767, 16, -32768, -22943, -32768, 16, 32767,
		22978, 32767, 16, -32768, -22944, -32768, 16, 32767, 22977, 32767, 16, -32768, -22944, -32768, 15,
		32767, 22976, 32767, 15, -32768, -22944, -32768, 15, 32767, 22976, 32767, 15, -32768, -22945, -32768,
		15, 32767, 22976, 32767, 15, -32768, -22946, -32768, 14, 32767, 22975, 32767, 14, -32768, -22946,
		-32768, 14, 32767, 22975, 32767, 14, -32768, -22947, -32768, 13, 32767, 22974, 32767, 13, -32768,
		-22947, -32768, 13, 32767, 22974, 32767, 13, -32768, -22948, -32768, 12, 32767, 22973, 32767, 12,
		-32768, -22948, -32768, 12, 32767, 22973, 32767, 11, -32768, -22948, -32768, 11, 32767, 22972, 32767,
		11, -32768, -22949, -32768, 11, 32767, 22971, 32767, 10, -32768, -22950, -32768, 10, 32767, 22970,
		32767, 10, -32768, -22950, -32768, 9, 32767, 22970, 32767, 9, -32768, -22951, -32768, 9, 32767,
		22970, 32767, 9, -32768, -22952, -32768, 9, 32767, 22969, 32767, 8, -32768, -22952, -32768, 8,
		32767, 22969, 32767, 7, -32768, -22953, -32768, 7, 32767, 22968, 32767, 7, -32768, -22953, -32768,
		7, 32767, 22968, 32767, 6, -32768, -22954, -32768, 6, 32767, 22967, 32767, 6, -32768, -22954,
		-32768, 5, 32767, 22967, 32767, 5, -32768, -22955, -32768, 5, 32767, 22966, 32767, 5, -32768,
		-22955, -32768, 5, 32767, 22965, 32767, 4, -32768, -22956, -32768, 4, 32767, 22965, 32767, 4,
		-32768, -22956, -32768, 4, 32767, 22965, 32767, 4, -32768, -22957, -32768, 3, 32767, 22964, 32767,
		3, -32768, -22957, -32768, 3, 32767, 22964, 32767, 3, -32768, -22957, -32768, 3, 32767, 22963,
		32767, 2, -32768, -22958, -32768, 2, 32767, 22964, 32767, 2, -32768, -22958, -32768, 2, 32767,
		22963, 32767, 2, -32768, -22958, -32768, 2, 32767, 22963, 32767, 1, -32768, -22959, -32768, 2,
		32767, 22962, 32767, 1, -32768, -22959, -32768, 1, 32767, 22962, 32767, 1, -32768, -22959, -32768,
		1, 32767, 22962, 32767, 0, -32768, -22959, -32768, 1, 32767, 22962, 32767, 1, -32768, -22959,
		-32768, 1, 32767, 22961, 32767, 0, -32768, -22960, -32768, 1, 32767, 22962, 32767, 0, -32768,
		-22960, -32768, 1, 32767, 22962, 32767, 1, -32768, -22960, -32768, 0, 32767, 22961, 32767, 0,
		-32768, -22960, -32768, 0, 32767, 22961, 32767, 1, -32768, -22960, -32768, 0, 32767, 22962, 32767,
		1, -32768, -22960, -32768, 0, 32767, 22961, 32767, 0, -32768, -22960, -32768, 0, 32767, 22961,
		32767, 0, -32768, -22960, -32768, 0, 32767, 22961, 32767, 0, -32768, -22959, -32768, 1, 32767,
		22961, 32767, 0, -32768, -22960, -32768, 0, 32767, 22962, 32767, 1, -32768, -22960, -32768, 0,
		32767, 22961, 32767, 0, -32768, -22960, -32768, 0, 32767, 22962, 32767, 1, -32768, -22959, -32768,
		1, 32767, 22962, 32767, 1, -32768, -22959, -32768, 1, 32767, 22962, 32767, 1, -32768, -22959,
		-32768, 1, 32767, 22962, 32767, 1, -32768, -22959, -32768, 1, 32767, 22962, 32767, 1, -32768,
		-22958, -32768, 2, 32767, 22962, 32767, 2, -32768, -22958, -32768, 2, 32767, 22963, 32767, 2,
		-32768, -22958, -32768, 2, 32767, 22963, 32767, 2, -32768, -22958, -32768, 2, 32767, 22963, 32767,
		2, -32768, -22958, -32768, 2, 32767, 22963, 32767, 3, -32768, -22957, -32768, 3, 32767, 22964,
		32767, 3, -32768, -22957, -32768, 3, 32767, 22964, 32767, 3, -32768, -22957, -32768, 3, 32767,
		22964, 32767, 4, -32768, -22956, -32768, 3, 32767, 22965, 32767, 4, -32768, -22956, -32768, 4,
		32767, 22965, 32767, 4, -32768, -22956, -32768, 4, 32767, 22965, 32767, 5, -32768, -22955, -32768,
		5, 32767, 22966, 32767, 5, -32768, -22955, -32768, 5, 32767, 22967, 32767, 6, -32768, -22955,
		-32768, 5, 32767, 22967, 32767, 6, -32768, -22954, -32768, 5, 32767, 22967, 32767, 6, -32768,
		-22954, -32768, 6, 32767, 22967, 32767, 6, -32768, -22953, -32768, 7, 32767, 22968, 32767, 7,
		-32768, -22953, -32768, 7, 32767, 22968, 32767, 7, -32768, -22953, -32768, 7, 32767, 22968, 32767,
		7, -32768, -22953, -32768, 7, 32767, 22968, 32767, 8, -32768, -22952, -32768, 8, 32767, 22969,
		32767, 8, -32768, -22952, -32768, 8, 32767, 22969, 32767, 9, -32768, -22951, -32768, 8, 32767,
		22970, 32767, 9, -32768, -22951, -32768, 9, 32767, 22970, 32767, 9, -32768, -22951, -32768, 9,
		32767, 22970, 32767, 9, -32768, -22950, -32768, 10, 32767, 22971, 32767, 10, -32768, -22950, -32768,
		10, 32767, 22971, 32767, 10, -32768, -22950, -32768, 10, 32767, 22971, 32767, 10, -32768, -22950,
		-32768, 10, 32767, 22971, 32767, 10, -32768, -22949, -32768, 11, 32767, 22972, 32767, 12, -32768,
		-22947, -32768, 14, 32767, 22975, 32767, 15, -32768, -22945, -32768, 15, 32767, 22976, 32767, 15,
		-32768, -22947, -32768, 12, 32767, 22972, 32767, 9, -32768, -22953, -32768, 5, 32767, 22964, 32767,
		1, -32768, -22962, -32768, -7, 32767, 22942, 32767, -48, -32768, -23106, -32768, -627, 32767, 11473,
		-1020, 393, -151, 21, -88, 171, -133, -14, -56, 70, -100, -3, -100, 96, -111,
		220, -278, 165, -160, 400, -499, 2602, -8096, -378, 19622, -22716, -13, 23192, -23704, 612,
		23310, -24652, 1618, 22503, -24304, 2025, 22095, -24518, 2996, 21888, -24968, 3357, 21135, -24192, 3330,
		20410, -23852, 3786, 19516, -24007, 4565, 19813, -24744, 5483, 18684, -24148, 5887, 17694, -23565, 6159,
		16498, -23244, 6373, 15822, -23098, 6963, 14893, -22768, 7667, 14144, -22946, 8837, 13184, -23031, 9459,
		12607, -22916, 9782, 12170, -22962, 10387, 11521, -22873, 11140, 10644, -22605, 12232, 9631, -22415, 13236,
		8261, -21752, 14088, 7396, -21423, 14479, 6228, -20607, 14647, 5232, -20206, 15029, 4481, -19426, 15358,
		3582, -19190, 15815, 2670, -18719, 16092, 1616, -18335, 16661, 858, -17771, 17170, -316, -17339, 17505,
		-865, -17057, 17859, -1377, -16543, 18218, -2340, -16133, 18909, -2977, -15951, 19324, -3644, -15380, 19358,
		-4161, -15110, 19733, -4628, -14546, 19875, -5395, -13737, 19917, -6150, -13103, 19777, -6529, -12662, 19611,
		-7162, -12139, 19421, -8020, -11433, 19567, -8708, -11083, 19465, -9298, -10601, 19770, -9988, -9863, 20013,
		-10811, -9561, 20192, -11102, -9126, 20560, -11723, -8850, 20944, -12133, -8325, 20687, -12426, -7873, 20552,
		-12878, -7292, 20585, -13094, -7054, 20373, -13534, -6476, 20087, -13749, -5754, 20061, -14414, -4979, 19873,
		-14897, -4329, 19500, -15592, -3566, 19171, -16110, -2800, 19012, -16451, -2313, 18776, -17067, -2019, 18659,
		-17215, -1514, 18552, -17610, -1076, 18361, -18106, -68, 18085, -18673, 674, 17705, -18786, 1226, 17457,
		-18773, 1540, 17261, -18876, 2005, 16871, -18947, 2617, 16540, -19185, 3211, 16136, -19388, 3842, 15409,
		-19451, 4744, 14792, -19746, 5459, 14291, -20012, 6118, 13517, -20116, 6786, 12936, -20480, 7510, 12447,
		-20771, 8177, 11998, -20868, 9051, 11293, -21145, 9761, 10810, -21276, 10865, 10212, -21255, 11790, 9187,
		-21298, 12814, 8272, -21204, 13667, 7523, -21027, 14333, 6417, -21080, 14738, 5729, -20906, 15278, 5170,
		-20771, 15599, 4743, -20546, 15987, 4171, -20340, 16387, 3689, -20222, 16908, 2602, -20170, 17766, 1407,
		-19927, 18480, 245, -19324, 19097, -840, -18976, 19444, -1506, -18764, 19935, -2072, -18516, 20395, -2771,
		-17946, 20931, -3594, -17426, 21464, -4636, -16909, 21961, -5479, -16429, 21922, -6281, -15845, 22236, -6931,
		-15116, 22191, -7673, -14202, 22100, -8482, -13502, 22038, -8676, -13161, 22169, -9547, -12595, 22292, -10479,
		-11956, 22583, -11312, -11496, 22745, -12053, -10774, 22780, -12663, -10102, 22810, -13427, -9561, 22996, -14184,
		-8672, 23066, -14912, -7805, 22979, -15745, -7087, 22950, -16142, -6430, 22859, -16638, -5923, 22735, -17303,
		-5240, 22766, -17744, -4487, 22553, -18337, -3781, 22323, -18951, -3171, 22220, -19202, -2902, 21831, -19541,
		-2166, 21418, -20036, -1470, 21174, -20279, -859, 20905, -20689, -131, 20404, -21221, 910, 20049, -21616,
		1774, 19330, -21950, 3050, 18771, -22184, 3922, 18226, -22159, 4414, 17523, -22227, 4974, 17097, -22366,
		5883, 16512, -22799, 6471, 15826, -22873, 7585, 14957, -22972, 8574, 14024, -23187, 8860, 13501, -23070,
		9515, 12683, -22912, 10064, 11733, -23024, 10800, 11054, -22940, 11445, 10565, -22859, 11811, 10007, -22533,
		12310, 9426, -22463, 12790, 8838, -22296, 13276, 8183, -21997, 13872, 7394, -21773, 14518, 6550, -21697,
		15250, 5569, -21397, 15760, 5044, -21077, 16031, 4759, -20704, 16479, 4379, -20637, 16899, 3645, -20393,
		17334, 2792, -19944, 17858, 2191, -19714, 18185, 1325, -19489, 18690, 318, -18969, 18904, -372, -18674,
		19270, -1294, -18106, 19869, -2338, -17539, 20141, -2877, -17222, 20284, -3368, -16582, 20620, -4318, -16035,
		21104, -5372, -15297, 21334, -6136, -14741, 21557, -6954, -14105, 21697, -7717, -13497, 21887, -8563, -12796,
		21966, -9400, -12295, 21963, -10025, -11703, 21869, -10742, -11161, 21987, -11373, -10668, 21872, -12196, -9940,
		22017, -12584, -9275, 22172, -13146, -8386, 22037, -13817, -7734, 21784, -14193, -7251, 21594, -14675, -6563,
		21463, -15097, -6119, 21247, -15500, -5418, 21061, -15915, -5001, 20855, -16225, -4360, 20685, -16713, -3844,
		20629, -17127, -3370, 20465, -17344, -2794, 20084, -17209, -2325, 19299, -16977, -1834, 18512, -17526, -1310,
		18554, -18247, -357, 18440, -19054, 625, 18080, -19480, 1405, 17880, -20013, 2310, 17410, -20134, 2822,
		17293, -20166, 3377, 17114, -20248, 3716, 16982, -20633, 4064, 16812, -20597, 4465, 16485, -20792, 5271,
		15625, -21034, 6092, 15007, -21112, 6733, 14453, -21259, 7242, 14071, -21464, 7655, 13497, -21566, 8275,
		12962, -21765, 8680, 12657, -21851, 9214, 12355, -21862, 9793, 11696, -21816, 10160, 11469, -21771, 10718,
		10883, -21919, 11312, 10359, -21909, 11853, 9926, -21792, 12306, 9493, -21775, 12859, 8922, -21767, 13464,
		8473, -21589, 13909, 7925, -21578, 14352, 7116, -21473, 14890, 6184, -21217, 15326, 5722, -21018, 15765,
		4873, -20791, 16512, 3810, -20495, 16836, 3216, -20376, 17339, 2617, -19991, 17692, 2069, -19606, 17970,
		1773, -19568, 17940, 1103, -19314, 18235, 682, -18861, 18318, -179, -18449, 18836, -1229, -17743, 19120,
		-1970, -17123, 19364, -2881, -16643, 19809, -3652, -16181, 20051, -4828, -15279, 20166, -5848, -14519, 20226,
		-6673, -14030, 20110, -7688, -13202, 20382, -8748, -12260, 20539, -9438, -11624, 20718, -10112, -10977, 20880,
		-10827, -10142, 20645, -11682, -9127, 20710, -11993, -8745, 20662, -12327, -8159, 20498, -12889, -7339, 20154,
		-13581, -6411, 19992, -14185, -5244, 19842, -15055, -4097, 19671, -15761, -3143, 19111, -16389, -1993, 18731,
		-16865, -1095, 18154, -17415, -7, 17766, -17929, 981, 17109, -18742, 1898, 16557, -19310, 3176, 15829,
		-19763, 4390, -12969, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851,
		-12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851, -12851

	};

	CTrace::CTrace()
	{
		m_iTracePatternLength = sizeof(sTraceArray) / sizeof(short);
		m_iSentLength = 0;
		LOG18("m_iTracePatternLength = %d\n", m_iTracePatternLength);
	}

	int CTrace::GenerateTrace(short *sBuffer, int iTraceLength)
	{
#ifdef USE_OLD_TRACE
		for (int i = 0; i < iTraceLength; i++)
		{
			if (i % 8 < 4)
			{
				sBuffer[i] = 30000;
			}
			else
			{
				sBuffer[i] = -30000;
			}
		}
		return 0;
#else
		LOG18("iTraceLength = %d, m_iTracePatternLength = %d, m_iSentLength = %d\n", iTraceLength, m_iTracePatternLength, m_iSentLength);
		if (m_iSentLength + iTraceLength <= m_iTracePatternLength)
		{
			memcpy(sBuffer, sTraceArray + m_iSentLength, iTraceLength * sizeof(short));
			m_iSentLength += iTraceLength;
			return 1;
		}
		return 0;
#endif
	}

	int CTrace::DetectTrace(short *sBuffer, int iTraceSearchLength, int iTraceDetectionLength)
	{
#ifdef USE_OLD_TRACE
		for (int i = 0; i < iTraceSearchLength - iTraceDetectionLength; i++)
		{
			if (sBuffer[i] > 0 && sBuffer[i + 1] > 0 && sBuffer[i + 2] > 0 && sBuffer[i + 3] > 0) //maybe trace started
			{
				int j = 0;
				for (; j < iTraceDetectionLength; j++)
				{
					if (j % 8 < 4 && sBuffer[i + j] < 0)
					{
						break;
					}
					if (j % 8 >= 4 && sBuffer[i + j] > 0)
					{
						break;
					}

				}
				if (j == iTraceDetectionLength)
				{
					return i;
				}
			}
		}
		return -1;
#else
		for (int i = 0; i < iTraceSearchLength - iTraceDetectionLength; i++)
		{
			int j = 0;
			for (; j < iTraceDetectionLength; j++)
			{
				if (j % 7 < 3 && sBuffer[i + j] > 0)
				{
					break;
				}
				if (j % 8 > 3 && sBuffer[i + j] < 0)
				{
					break;
				}

			}
			if (j == iTraceDetectionLength)
			{
				return i;
			}			
		}
		return -1;

#endif
	}

} //namespace MediaSDK